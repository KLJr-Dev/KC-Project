{"openapi":"3.0.0","paths":{"/ping":{"get":{"operationId":"AppController_ping","parameters":[],"responses":{"200":{"description":""}},"summary":"v0.0.5 — Reachability endpoint\n\nInfrastructure-only endpoint.\nNot part of application domain.\nWill be removed or disabled post v0.1.x.","tags":["App"]}},"/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}}},"summary":"POST /auth/register — Public. No rate limiting (CWE-307).","tags":["Auth"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponseDto"}}}}},"summary":"POST /auth/login — Public. No rate limiting, no lockout (CWE-307).","tags":["Auth"]}},"/auth/me":{"get":{"operationId":"AuthController_getMe","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"summary":"GET /auth/me — Protected. Returns user profile from DB.","tags":["Auth"]}},"/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"responses":{"201":{"description":""}},"summary":"POST /auth/logout — Protected. Intentionally does nothing server-side.\nVULN: CWE-613 — token remains valid after logout.","tags":["Auth"]}},"/users":{"post":{"operationId":"UsersController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"tags":["Users"]},"get":{"operationId":"UsersController_findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}}}}}},"tags":["Users"]}},"/users/{id}":{"get":{"operationId":"UsersController_findById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"tags":["Users"]},"put":{"operationId":"UsersController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}},"tags":["Users"]},"delete":{"operationId":"UsersController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Users"]}},"/files":{"post":{"operationId":"FilesController_upload","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadFileDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileResponseDto"}}}}},"summary":"POST /files -- multipart file upload.\nVULN: client filename used as disk filename (CWE-22).\nVULN: no file size limit (CWE-400).\nVULN: mimetype from client header (CWE-434).","tags":["Files"]},"get":{"operationId":"FilesController_findAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FileResponseDto"}}}}}},"summary":"GET /files -- return all file records, unbounded. No pagination.","tags":["Files"]}},"/files/{id}":{"get":{"operationId":"FilesController_getById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileResponseDto"}}}}},"summary":"GET /files/:id -- return file metadata or 404.","tags":["Files"]},"delete":{"operationId":"FilesController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"DELETE /files/:id -- remove file record AND file from disk.\nVULN: no ownership check (CWE-639).\nVULN: no path validation before fs.unlink (CWE-22).","tags":["Files"]}},"/files/{id}/download":{"get":{"operationId":"FilesController_download","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"GET /files/:id/download -- stream file from disk.\nVULN: no ownership check (CWE-639).\nVULN: no path validation on storagePath (CWE-22).\nVULN: Content-Type from client-supplied mimetype (CWE-434).","tags":["Files"]}},"/sharing/public/{token}":{"get":{"operationId":"SharingController_publicDownload","parameters":[{"name":"token","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"GET /sharing/public/:token -- unauthenticated file download.\nVULN: no auth required (CWE-285), sequential tokens (CWE-330),\nexpiry not checked (CWE-613).\n\nIMPORTANT: This route must be declared before :id routes to avoid\n\"public\" being captured as an id parameter.","tags":["Sharing"]}},"/sharing":{"post":{"operationId":"SharingController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSharingDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SharingResponseDto"}}}}},"summary":"POST /sharing -- create share record. ownerId from JWT.","tags":["Sharing"]},"get":{"operationId":"SharingController_read","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SharingResponseDto"}}}}}},"summary":"GET /sharing -- list all share records.","tags":["Sharing"]}},"/sharing/{id}":{"get":{"operationId":"SharingController_getById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SharingResponseDto"}}}}},"summary":"GET /sharing/:id -- single share or 404.","tags":["Sharing"]},"put":{"operationId":"SharingController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSharingDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SharingResponseDto"}}}}},"summary":"PUT /sharing/:id -- update share or 404.","tags":["Sharing"]},"delete":{"operationId":"SharingController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"DELETE /sharing/:id -- remove share or 404.","tags":["Sharing"]}},"/admin":{"post":{"operationId":"AdminController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAdminDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminResponseDto"}}}}},"summary":"POST /admin — create admin item.","tags":["Admin"]},"get":{"operationId":"AdminController_read","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AdminResponseDto"}}}}}},"summary":"GET /admin — list all admin items.","tags":["Admin"]}},"/admin/crash-test":{"get":{"operationId":"AdminController_crashTest","parameters":[],"responses":{"200":{"description":""}},"summary":"GET /admin/crash-test — deliberately throws an unhandled Error.\nMust be declared before @Get(':id') to avoid route collision.","tags":["Admin"]}},"/admin/{id}":{"get":{"operationId":"AdminController_getById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminResponseDto"}}}}},"summary":"GET /admin/:id — single admin item or 404.","tags":["Admin"]},"put":{"operationId":"AdminController_update","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAdminDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminResponseDto"}}}}},"summary":"PUT /admin/:id — update admin item or 404.","tags":["Admin"]},"delete":{"operationId":"AdminController_delete","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"summary":"DELETE /admin/:id — remove admin item or 404.","tags":["Admin"]}}},"info":{"title":"KC-Project API","description":"v0.3.5 -- File Handling Surface: Multipart uploads, file download/streaming, filesystem deletion, public sharing via predictable tokens. All file handling CWEs introduced.","version":"0.3.5","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"RegisterDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"username":{"type":"string"}},"required":["email","password","username"]},"AuthResponseDto":{"type":"object","properties":{"token":{"type":"string"},"userId":{"type":"string"},"message":{"type":"string"}},"required":["token","userId"]},"LoginDto":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"UserResponseDto":{"type":"object","properties":{"id":{"type":"string"},"email":{"type":"string"},"username":{"type":"string"},"createdAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["id","createdAt","updatedAt"]},"CreateUserDto":{"type":"object","properties":{"email":{"type":"string"},"username":{"type":"string"},"password":{"type":"string"}}},"UpdateUserDto":{"type":"object","properties":{"email":{"type":"string"},"username":{"type":"string"},"password":{"type":"string"}}},"UploadFileDto":{"type":"object","properties":{"description":{"type":"string"}}},"FileResponseDto":{"type":"object","properties":{"id":{"type":"string"},"ownerId":{"type":"string"},"filename":{"type":"string"},"mimetype":{"type":"string"},"storagePath":{"type":"string"},"description":{"type":"string"},"size":{"type":"number"},"uploadedAt":{"type":"string"}},"required":["id","filename","uploadedAt"]},"CreateSharingDto":{"type":"object","properties":{"fileId":{"type":"string"},"public":{"type":"boolean"},"expiresAt":{"type":"string"}}},"SharingResponseDto":{"type":"object","properties":{"id":{"type":"string"},"ownerId":{"type":"string"},"fileId":{"type":"string"},"publicToken":{"type":"string"},"public":{"type":"boolean"},"createdAt":{"type":"string"},"expiresAt":{"type":"string"}},"required":["id","createdAt"]},"UpdateSharingDto":{"type":"object","properties":{"public":{"type":"boolean"},"expiresAt":{"type":"string"}}},"CreateAdminDto":{"type":"object","properties":{"label":{"type":"string"},"role":{"type":"string"}}},"AdminResponseDto":{"type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"role":{"type":"string"},"createdAt":{"type":"string"}},"required":["id","createdAt"]},"UpdateAdminDto":{"type":"object","properties":{"label":{"type":"string"},"role":{"type":"string"}}}}}}